<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="天地一键">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="天地一键">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="天地一键">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>天地一键</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-139350612-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">天地一键</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/14/lpl-record/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/14/lpl-record/" itemprop="url">使用Vue、Django前后端分离打造LPL战绩查询网站</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-14T13:19:41+08:00">
                2020-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这段时间在家里看了不少 LPL 的比赛，但是在官网以及其他直播网站查战绩的时候发现好像都没有查某一支队伍的战绩的功能，正好我前段时间学了点 Vue 和 Django，所以就想自己弄一个试试。主要技术栈为：Vue.js、Django 和 Django REST framework，战绩是用 Python 脚本从官网上爬的。</p>
<h5 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h5><p>先从脚本开始吧，我希望展示战绩的时候能够显示战队的图标，在官网里有一个<a href="https://lpl.qq.com/es/team.shtml" target="_blank" rel="noopener">页面</a>是专门用来展示战队的：</p>
<p><img src="https://i.loli.net/2020/08/14/iAnQe5yJxMta6Y7.png" alt="image.png"></p>
<p>我本可以一个一个把这些图标手动下载下来的，但是又有点不想这么干，毕竟有17个队呢，所以我想试试能不能用爬虫爬下来，这还是我第一次接触爬虫，在网上找了一下，决定用 Node 的 cheerio 模块试一下，因为简单来说 cheerio 就是服务器端的 jQuery，而我大二的时候在专选课上学过一点 jQuery。然后我做的时候发现那个页面不能直接爬（当时还不太清楚动态页面这一说），然后我一气之下把展示图标这一段的 HTML 代码复制下来保存到本地了，然后就可以从本地读取再解析了hhh，代码为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// var img_url = "https://lpl.qq.com/es/team.shtml"</span></span><br><span class="line"><span class="comment">// var html_content = ""</span></span><br><span class="line"><span class="comment">// var images = []</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="string">'../media/images/'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">save_img_fn</span>(<span class="params">url, name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">    http.get(url, (res) =&gt; &#123;</span><br><span class="line">        res.on(<span class="string">"data"</span>, (data) =&gt; &#123;</span><br><span class="line">            fs.appendFile(root + name + <span class="string">".png"</span>, data, (err) =&gt; &#123;&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> $ = cheerio.load(fs.readFileSync(<span class="string">'team-list.html'</span>))</span><br><span class="line"></span><br><span class="line">$(<span class="string">'dl.club-bar dd a'</span>).each(<span class="function">(<span class="params">idx, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">'http:'</span> + $(item).children(<span class="string">'img'</span>).attr(<span class="string">'src'</span>)</span><br><span class="line">    <span class="keyword">let</span> name = $(item).children(<span class="string">'p'</span>).text()</span><br><span class="line">    save_img_fn(url, name)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>把图片都保存到了 Django 的媒体文件夹里。然后就是要爬取比赛记录了，这个要是手动弄得累死，但是这个时候我已经稍微了解动态页面了，然后搜了一下决定用 Python 的 Selenium 和 BeautifulSoup 试试，这一次过程还是比较愉快的，很轻松就可以搞定，并且爬取之后就直接假如数据库里了，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> django</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将项目根目录添加到 Python 的模块搜索路径中</span></span><br><span class="line">back = os.path.dirname</span><br><span class="line">BASE_DIR = back(back(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(BASE_DIR)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_one_record</span><span class="params">(winner_name, loser_name, winner_score=<span class="number">2</span>, loser_score=<span class="number">0</span>)</span>:</span></span><br><span class="line">    winner = Team.objects.get(name=winner_name)</span><br><span class="line">    loser = Team.objects.get(name=loser_name)</span><br><span class="line">    q = Record.objects.filter(winner=winner, loser=loser)</span><br><span class="line">    <span class="keyword">if</span> q:</span><br><span class="line">        print(<span class="string">'record exists!'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    Record.objects.create(winner=winner, loser=loser, winner_score=winner_score, loser_score=loser_score)</span><br><span class="line">    print(winner_name, winner_score, <span class="string">':'</span>, loser_score, loser_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    os.environ.setdefault(<span class="string">"DJANGO_SETTINGS_MODULE"</span>, <span class="string">"lpl_site.settings"</span>)</span><br><span class="line">    django.setup()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> record.models <span class="keyword">import</span> Team, Record</span><br><span class="line"></span><br><span class="line">    driver = webdriver.Chrome()</span><br><span class="line">    driver.get(<span class="string">'https://lpl.qq.com/index.shtml'</span>)</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    soup = BeautifulSoup(driver.page_source, <span class="string">'lxml'</span>)</span><br><span class="line">    container = soup.find(id=<span class="string">'LPL_R_S_top_swiper_container'</span>)</span><br><span class="line">    ul = container.find(<span class="string">'ul'</span>, class_=<span class="string">'swiper-wrapper'</span>)</span><br><span class="line">    game_lists = ul.find_all(<span class="string">'li'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> game_lists:</span><br><span class="line">        team_a = li.find(class_=<span class="string">'gamelist-team-a'</span>).a.string</span><br><span class="line">        team_b = li.find(class_=<span class="string">'gamelist-team-b'</span>).a.string</span><br><span class="line">        score = li.find(class_=<span class="string">'gamelist-score'</span>).find_all(<span class="string">'a'</span>)</span><br><span class="line">        score_a = int(score[<span class="number">0</span>].string)</span><br><span class="line">        score_b = int(score[<span class="number">2</span>].string)</span><br><span class="line">        <span class="keyword">if</span> score_a + score_b == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> score_a &lt; score_b:</span><br><span class="line">            team_a, team_b, score_a, score_b = team_b, team_a, score_b, score_a</span><br><span class="line">        add_one_record(team_a, team_b, score_a, score_b)</span><br><span class="line"></span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure>
<h5 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h5><p>后端我本来打算只使用 Django，因为我大三系统分析的项目就是用这个做的，有点熟悉了，后来发现还有 Django REST framework 这个东西，只是写 API 的话好像很方便，实践之后发现确实如此。</p>
<h6 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h6><p>模型的定义很简单，只定义了 Team 和 Record 两个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Team</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">5</span>)</span><br><span class="line">    logo = models.ImageField(upload_to=<span class="string">'images/'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Record</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    winner = models.ForeignKey(Team, on_delete=models.CASCADE, related_name=<span class="string">'game_winner'</span>)</span><br><span class="line">    loser = models.ForeignKey(Team, on_delete=models.CASCADE, related_name=<span class="string">'game_loser'</span>)</span><br><span class="line">    winner_score = models.SmallIntegerField(default=<span class="number">2</span>)</span><br><span class="line">    loser_score = models.SmallIntegerField(default=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">&#123;self.winner.name&#125;</span> <span class="subst">&#123;self.winner_score&#125;</span>:<span class="subst">&#123;self.loser_score&#125;</span> <span class="subst">&#123;self.loser.name&#125;</span>'</span></span><br></pre></td></tr></table></figure>
<p>本来是打算把 Record 定义成 Team 里面的一个 ManyToManyField 的，但是因为 Team 和它自己的关系，所以后面我尝试的过程中发现还是有一点不方便，然后就决定直接把 Record 单独定义成一个模型了，然后用两个外键分别指向胜方和败方并记录两者的得分。</p>
<h6 id="序列化器"><a href="#序列化器" class="headerlink" title="序列化器"></a>序列化器</h6><p>序列化器允许将诸如查询集和模型实例之类的复杂数据转换为原生 Python 数据类型，然后可以将它们轻松地呈现为 <code>JSON</code>，<code>XML</code> 或其他内容类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Team, Record</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeamSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Team</span><br><span class="line">        fields = <span class="string">'__all__'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecordSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Record</span><br><span class="line">        fields = <span class="string">'__all__'</span></span><br></pre></td></tr></table></figure>
<p>直接用了 ModelSerializer，很方便。</p>
<h6 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status, viewsets</span><br><span class="line"><span class="keyword">from</span> rest_framework.decorators <span class="keyword">import</span> api_view</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, get_object_or_404</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Team, Record</span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> TeamSerializer, RecordSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeamViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    serializer_class = TeamSerializer</span><br><span class="line">    queryset = Team.objects.all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecordViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    serializer_class = RecordSerializer</span><br><span class="line">    queryset = Record.objects.all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@api_view(['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">team_detail</span><span class="params">(request, name)</span>:</span></span><br><span class="line">    team = get_object_or_404(Team, name=name)</span><br><span class="line"></span><br><span class="line">    victory_record = Record.objects.filter(winner=team)</span><br><span class="line">    victory_data = [&#123;<span class="string">'winner'</span>: r.winner.name, <span class="string">'loser'</span>: r.loser.name,</span><br><span class="line">                     <span class="string">'winner_score'</span>: r.winner_score, <span class="string">'loser_score'</span>: r.loser_score&#125; <span class="keyword">for</span> r <span class="keyword">in</span> victory_record]</span><br><span class="line">    </span><br><span class="line">    defeat_record = Record.objects.filter(loser=team)</span><br><span class="line">    defeat_data = [&#123;<span class="string">'winner'</span>: r.winner.name, <span class="string">'loser'</span>: r.loser.name,</span><br><span class="line">                     <span class="string">'winner_score'</span>: r.winner_score, <span class="string">'loser_score'</span>: r.loser_score&#125; <span class="keyword">for</span> r <span class="keyword">in</span> defeat_record]</span><br><span class="line">    </span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    data[<span class="string">'victory'</span>] = victory_data</span><br><span class="line">    data[<span class="string">'defeat'</span>] = defeat_data</span><br><span class="line">    <span class="keyword">return</span> Response(data)</span><br></pre></td></tr></table></figure>
<p>直接用 ModelViewSet 很方便，但是我还需要根据战队名称搜索得到战队战绩的视图，所以就又自定义了一个（前面那两个也没用到，就是想看看这东西好不好用），把该战队胜利的和战败的战绩都得到再返回。</p>
<h6 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h6><p>在项目的<code>settings.py</code>中要加入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'media'</span>)</span><br><span class="line">MEDIA_URL = <span class="string">'/media/'</span>、</span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.admin'</span>,</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>,</span><br><span class="line">    <span class="string">'django.contrib.contenttypes'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages'</span>,</span><br><span class="line">    <span class="string">'django.contrib.staticfiles'</span>,</span><br><span class="line">    <span class="string">'record'</span>,</span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>前面两项是为了使前端能够访问之前脚本爬取的战队的图标，后端主要就是这些代码了，主要就是提供一个获取战队战绩的 API。</p>
<h5 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h5><p>前端使用 Vue.js，这个也有学过一点但是没怎么用过，这次决定试一下，结合使用 Element 和 axios，其实也就写了一个组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-container&gt;</span><br><span class="line">    &lt;el-header&gt;</span><br><span class="line">      &lt;el-input placeholder=&quot;输入战队名&quot; v-model=&quot;team&quot; @keyup.enter.native=&quot;search&quot; id=&quot;search&quot;&gt;</span><br><span class="line">        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; type=&quot;primary&quot; @click=&quot;search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-input&gt;</span><br><span class="line">    &lt;/el-header&gt;</span><br><span class="line">    &lt;el-main&gt;</span><br><span class="line">      &lt;el-row type=&quot;flex&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">          &lt;el-table :data=&quot;record.victory&quot; id=&quot;victory&quot;&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;胜方&quot; prop=&quot;winner&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;img :src=parseImg(scope.row.winner) alt=&quot;&quot; srcset=&quot;&quot;&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123;scope.row.winner&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;得分&quot; prop=&quot;winner_score&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;得分&quot; prop=&quot;loser_score&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;败方&quot; prop=&quot;loser&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;img :src=parseImg(scope.row.loser) alt=&quot;&quot; srcset=&quot;&quot;&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123;scope.row.loser&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">          &lt;el-table :data=&quot;record.defeat&quot; id=&quot;defeat&quot;&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;胜方&quot; prop=&quot;winner&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;img :src=parseImg(scope.row.winner) alt=&quot;&quot; srcset=&quot;&quot;&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123;scope.row.winner&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;得分&quot; prop=&quot;winner_score&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;得分&quot; prop=&quot;loser_score&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;败方&quot; prop=&quot;loser&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;img :src=parseImg(scope.row.loser) alt=&quot;&quot; srcset=&quot;&quot;&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123;scope.row.loser&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/el-main&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      team: &quot;&quot;,</span><br><span class="line">      record: &#123;</span><br><span class="line">        victory: null,</span><br><span class="line">        defeat: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    search() &#123;</span><br><span class="line">      let that = this;</span><br><span class="line">      this.axios.get(&quot;/detail/&quot; + this.team + &quot;/&quot;)</span><br><span class="line">        .then(function (response) &#123;</span><br><span class="line">          that.record = response.data;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    parseImg (team) &#123;</span><br><span class="line">      return &quot;/api/media/images/&quot; + team + &quot;.png&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;stylus&quot; scoped&gt;</span><br><span class="line">.el-input</span><br><span class="line">  width 80%</span><br><span class="line">  margin-left 10%</span><br><span class="line">img</span><br><span class="line">  width 25px</span><br><span class="line">  vertical-align middle</span><br><span class="line">span</span><br><span class="line">  vertical-align middle</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>输入战队之后搜索可以得到战队的战绩，然后就可以在表格中显示，战队的图标的 URL 可以根据战队名直接得到，但是要在前面加上<code>/api</code>，目的是为了解决跨域问题，axios 的 <code>baseURL</code>也要设置为<code>/api</code>，然后在<code>vue.config.js</code>（需要自己创建）中加入以下内容来配置代理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'http://127.0.0.1:8088/'</span>, <span class="comment">//对应自己的接口</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        ws: <span class="literal">true</span>,</span><br><span class="line">        secure: <span class="literal">false</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终效果：</p>
<p><img src="https://i.loli.net/2020/08/14/zGnlDxQEpLWOsIJ.png" alt="IG"></p>
<p>勉强能看吧，全部代码上传到<a href="https://github.com/tiandiyijian/LPL" target="_blank" rel="noopener">github</a>了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/09/trie/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/09/trie/" itemprop="url">字典树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-09T16:34:30+08:00">
                2020-07-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天碰到了个以前没用过的东西：字典树。题目是<a href="https://leetcode-cn.com/problems/re-space-lcci/" target="_blank" rel="noopener">恢复空格</a>，如下：哦，不！你不小心把一个长篇文章中的空格、标点都删掉了，并且大写也弄成了小写。像句子”I reset the computer. It still didn’t boot!”已经变成了”iresetthecomputeritstilldidntboot”。在处理标点符号和大小写之前，你得先把它断成词语。当然了，你有一本厚厚的词典dictionary，不过，有些词没在词典里。假设文章用sentence表示，设计一个算法，把文章断开，要求未识别的字符最少，返回未识别的字符数。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line">dictionary = [&quot;looked&quot;,&quot;just&quot;,&quot;like&quot;,&quot;her&quot;,&quot;brother&quot;]</span><br><span class="line">sentence = &quot;jesslookedjustliketimherbrother&quot;</span><br><span class="line">输出： 7</span><br><span class="line">解释： 断句后为&quot;jess looked just like tim her brother&quot;，共7个未识别字符。</span><br></pre></td></tr></table></figure>
<p>题目下面的提示里一直说递归，于是我先写了个递归版本的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">respace</span><span class="params">(self, dictionary: List[str], sentence: str)</span> -&gt; int:</span></span><br><span class="line">        len_sentence = len(sentence)</span><br><span class="line">        dictionary = set(dictionary)</span><br><span class="line"><span class="meta">        @lru_cache(maxsize=1000)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(start)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> start == len_sentence:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            ans = len_sentence - start</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(start + <span class="number">1</span>, len_sentence + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> sentence[start: i] <span class="keyword">in</span> dictionary:</span><br><span class="line">                    ans = min(helper(i), ans)</span><br><span class="line">            <span class="keyword">if</span> sentence[start] <span class="keyword">not</span> <span class="keyword">in</span> dictionary:</span><br><span class="line">                <span class="keyword">return</span> min(ans, <span class="number">1</span> + helper(start+<span class="number">1</span>))</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>对每个字符，都看看以它为首的单词有没有出现在字典中，如果有的话，递归下去，还有一种可能是把它当作不能识别的字符，这些结果中的最小值就是答案。</p>
<p>当然，这道题也可以用动态规划来写，状态转移方程为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i] = min(dp[i<span class="number">-1</span>] + <span class="number">1</span>, min(dp[j] <span class="keyword">for</span> j <span class="keyword">in</span> range(i) <span class="keyword">if</span> s[j:i] <span class="keyword">in</span> dictionary))</span><br></pre></td></tr></table></figure>
<p><code>dp[i]</code>表示<code>sentence</code>中位置<code>i</code>之前的未被识别的字符数的最小值，最后问题化简成了转移的时候如何快速判断当前子串是否存在于词典中，起初我是选择用哈希表来优化的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">respace</span><span class="params">(self, dictionary: List[str], sentence: str)</span> -&gt; int:</span></span><br><span class="line">        len_sentence = len(sentence)</span><br><span class="line">        dictionary = set(dictionary)</span><br><span class="line">        dp = list(range(len_sentence + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len_sentence + <span class="number">1</span>):</span><br><span class="line">            dp[i] = dp[i<span class="number">-1</span>] + <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i):</span><br><span class="line">                <span class="keyword">if</span> sentence[j:i] <span class="keyword">in</span> dictionary:</span><br><span class="line">                    dp[i] = min(dp[i], dp[j])</span><br><span class="line">        <span class="comment"># print(dp)</span></span><br><span class="line">        <span class="keyword">return</span> dp[len_sentence]</span><br></pre></td></tr></table></figure>
<p>以下内容转自<a href="https://leetcode-cn.com/problems/re-space-lcci/solution/hui-fu-kong-ge-by-leetcode-solution/" target="_blank" rel="noopener">官方题解</a>:</p>
<p>但这样速度很慢，因为用哈希表来实现本身有两个问题，一个是哈希表本身的常数很大，还有一个是我们在枚举子串是否在词典中的时候有些其实是没有必要的枚举。简单举例，如果我们有词典：[‘aabc’, ‘babc’, ‘cbc’] ，但是我们在倒序枚举的时候检查 dc 这个子串没出现在词典中以后我们就没必要再接着往前枚举是否有合法的子串了，因为 dc 本身已经不是词典中「任意一个单词的后缀」，我们再接着枚举 <em>dc 或者 *</em>dc 判断其是否在词典中都是无用功。<br>我们将词典中所有的单词「反序」插入字典树中，然后每次转移的时候我们从当前的下标<code>i</code>出发倒序遍历 <code>i−1,i−2,⋯,0</code>。在 Trie 上从根节点出发开始走，直到走到当前的字符 <code>sentence[j]</code>在 Trie 上没有相应的位置，说明 <code>sentence[j:i]</code>不存在在词典中，且它已经不是「任意一个单词的后缀」，此时我们直接跳出循环即可。否则，我们需要判断当前的子串是否是一个单词，这里我们直接在插入 Trie 的时候在单词末尾的节点打上一个 End 的标记即可，这样我们在走到某个节点的时候就可以判断是否是一个单词的末尾并根据状态转移方程更新我们的 dp 值。</p>
<p>本来想自己说明一下的，后来发现还是官方写得好。Python 中利用字典可以很方便地实现字典树，以下是我的答案：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">_end = <span class="string">'_end_'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.root = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_trie</span><span class="params">(self, *words)</span>:</span></span><br><span class="line">        root = self.root</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            current_dict = root</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(len(word)<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">                current_dict = current_dict.setdefault(word[i], &#123;&#125;)</span><br><span class="line">            current_dict[_end] = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def in_trie(self, word):</span></span><br><span class="line">    <span class="comment">#     current_dict = self.root</span></span><br><span class="line">    <span class="comment">#     for i in range(len(word)-1, -1, -1):</span></span><br><span class="line">    <span class="comment">#         current_dict = current_dict.get(word[i], None)</span></span><br><span class="line">    <span class="comment">#         if not current_dict:</span></span><br><span class="line">    <span class="comment">#             return False</span></span><br><span class="line">    <span class="comment">#     return current_dict.get(_end, False)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def insert(self, word):</span></span><br><span class="line">    <span class="comment">#     current_dict = self.root</span></span><br><span class="line">    <span class="comment">#     for i in range(len(word)-1, -1, -1):</span></span><br><span class="line">    <span class="comment">#         current_dict = current_dict.setdefault(word[i], &#123;&#125;)</span></span><br><span class="line">    <span class="comment">#     current_dict[_end] = True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def remove(self, word):</span></span><br><span class="line">    <span class="comment">#     current_dict = self.root</span></span><br><span class="line">    <span class="comment">#     for i in range(len(word)-1, -1, -1):</span></span><br><span class="line">    <span class="comment">#         current_dict = current_dict.get(word[i], None)</span></span><br><span class="line">    <span class="comment">#         if not current_dict:</span></span><br><span class="line">    <span class="comment">#             return</span></span><br><span class="line">    <span class="comment">#     current_dict[_end] = False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">respace</span><span class="params">(self, dictionary: List[str], sentence: str)</span> -&gt; int:</span></span><br><span class="line">        len_sentence = len(sentence)</span><br><span class="line">        t = Trie()</span><br><span class="line">        t.make_trie(*dictionary)</span><br><span class="line">        <span class="comment"># print(t.root)</span></span><br><span class="line">        dp = list(range(len_sentence + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len_sentence + <span class="number">1</span>):</span><br><span class="line">            dp[i] = dp[i<span class="number">-1</span>] + <span class="number">1</span></span><br><span class="line">            flag = <span class="keyword">False</span></span><br><span class="line">            current_dict = t.root</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">                current_dict = current_dict.get(sentence[j], <span class="keyword">None</span>)</span><br><span class="line">                <span class="keyword">if</span> current_dict <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">elif</span> current_dict.get(_end, <span class="keyword">False</span>):</span><br><span class="line">                    dp[i] = min(dp[i], dp[j])</span><br><span class="line">        <span class="comment"># print(dp)</span></span><br><span class="line">        <span class="keyword">return</span> dp[len_sentence]</span><br></pre></td></tr></table></figure>
<p>这次主要是新学习到了字典树这个东西，优势在于从<code>O(s)</code>到<code>O(s+1)</code>它只需要常数时间。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/25/python-assign-multiple-values-to-multiple-variables/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/25/python-assign-multiple-values-to-multiple-variables/" itemprop="url">python中同时给多个变量赋值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-25T17:25:35+08:00">
                2020-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天刷题碰到一个双向链表的问题，我想在链表头的后面插入一个节点，我起初是这么写的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head.next, head.next.prev, node.prev, node.next = node, node, head, head.next</span><br></pre></td></tr></table></figure>
<p>但是这么写会出现一个问题，就是本来链表中的第二个节点在<code>node</code>插入之后它的<code>prev</code>并没有指向<code>node</code>，我的期望是上述辅助语句中的第二个变量即<code>head.next.prev</code>指的是原链表中的第二个节点，但事实并不是这样，对这个语句反汇编得到如下结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">dis.dis(<span class="string">'head.next, head.next.prev, node.prev, node.next = node, node, head, head.next'</span>)</span><br><span class="line">  <span class="number">1</span>           <span class="number">0</span> LOAD_NAME                <span class="number">0</span> (node)</span><br><span class="line">              <span class="number">2</span> LOAD_NAME                <span class="number">0</span> (node)</span><br><span class="line">              <span class="number">4</span> LOAD_NAME                <span class="number">1</span> (head)</span><br><span class="line">              <span class="number">6</span> LOAD_NAME                <span class="number">1</span> (head)</span><br><span class="line">              <span class="number">8</span> LOAD_ATTR                <span class="number">2</span> (next)</span><br><span class="line">             <span class="number">10</span> BUILD_TUPLE              <span class="number">4</span></span><br><span class="line">             <span class="number">12</span> UNPACK_SEQUENCE          <span class="number">4</span></span><br><span class="line">             <span class="number">14</span> LOAD_NAME                <span class="number">1</span> (head)</span><br><span class="line">             <span class="number">16</span> STORE_ATTR               <span class="number">2</span> (next)</span><br><span class="line">             <span class="number">18</span> LOAD_NAME                <span class="number">1</span> (head)</span><br><span class="line">             <span class="number">20</span> LOAD_ATTR                <span class="number">2</span> (next)</span><br><span class="line">             <span class="number">22</span> STORE_ATTR               <span class="number">3</span> (prev)</span><br><span class="line">             <span class="number">24</span> LOAD_NAME                <span class="number">0</span> (node)</span><br><span class="line">             <span class="number">26</span> STORE_ATTR               <span class="number">3</span> (prev)</span><br><span class="line">             <span class="number">28</span> LOAD_NAME                <span class="number">0</span> (node)</span><br><span class="line">             <span class="number">30</span> STORE_ATTR               <span class="number">2</span> (next)</span><br><span class="line">             <span class="number">32</span> LOAD_CONST               <span class="number">0</span> (<span class="keyword">None</span>)</span><br><span class="line">             <span class="number">34</span> RETURN_VALUE</span><br></pre></td></tr></table></figure>
<p>大概意思是先把等号右边的值从左到右依次入栈，然后再把等号左边的值从左到右依次赋值，第一次<code>head.next=node</code>没有问题，第二次<code>head.next.prev=node</code>就有问题了，因为这时<code>head.next</code>已经指向<code>node</code>了，而不是原链表中的第二个节点，所以它就相当于<code>node.prev=node</code>，接下来<code>node.prev=head</code>没有问题，最后的<code>node=head.next</code>看起来有问题，因为此时<code>head.next=node</code>，但其实也没有问题，因为这个语句是先把右边的值入栈的，在入栈的时候<code>head.next</code>指向的是原链表中的第二个节点，也就是说，在栈里的值就是原本期望的原链表中的第二个节点(引用)，这个值已经入栈了，后面的变动不影响它。最终，这个链表的状态为：</p>
<p><img src="/2020/05/25/python-assign-multiple-values-to-multiple-variables/list.png" alt=""></p>
<p>要想使这个语句有效，只需把<code>head.next.prev</code>放到<code>head.next</code>前面就行了，比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head.next.prev, head.next, node.prev, node.next = node, node, head, head.next</span><br></pre></td></tr></table></figure>
<p>像平时经常用到的<code>a, b = b, a</code>其实也是这样的原理，先把右边的值依次入栈，然后再依次赋给左边的值，从而达到交换它们的值的目的。其实很久之前我就有这个疑问了，只不过当时没深究，今天终于忍不住了了想看看它到底是怎么回事。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/06/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/06/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/" itemprop="url">和为s的连续正数序列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-06T12:53:30+08:00">
                2020-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>输入一个正整数 <code>target</code> ，输出所有和为 <code>target</code> 的连续正整数序列（至少含有两个数）。</p>
<p>序列内的数字由小到大排列，不同序列按照首个数字从小到大排列。</p>
<p> <strong>示例 1：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：target = 9</span><br><span class="line">输出：[[2,3,4],[4,5]]</span><br></pre></td></tr></table></figure>
<p><strong>示例 2：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：target = 15</span><br><span class="line">输出：[[1,2,3,4,5],[4,5,6],[7,8]]</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>这可以当作数学题来解，假设有一个答案有n个数，开头的那个数是x，那么就会有：</p>
<script type="math/tex; mode=display">
x+(x+1)+...+(x+n-1) = n*x+(1+2+...+(n-1))=n*x+(n*(n-1))/2=target</script><p>那么<code>x</code>就会等于：</p>
<script type="math/tex; mode=display">
\frac{target-(n*(n-1))/2}{n}</script><p>因为<code>x</code>必须是整数，所以这个分式的结果是整数时才会成立。还可以确定<code>n</code>的上界，就是</p>
<script type="math/tex; mode=display">
target - (n*(n-1)/2) > 0</script><p>那么<code>n</code>的上界近似为</p>
<script type="math/tex; mode=display">
\sqrt{2*target}</script><p>虽然这不是这个不等式的准确解，但是可以把 $n=\sqrt{2*target}$ 带入那个分式可以得到原式等于：</p>
<script type="math/tex; mode=display">
\frac{target-(\sqrt{2*target}*(\sqrt{2*target}-1))/2}{\sqrt{2*target}}=\frac{\frac{\sqrt{2*target}}{2}}{\sqrt{2*target}}=\frac{1}{2}<1</script><p>所以可以确定<code>n</code>的上界还没有 $\sqrt{2*target}$ 大，这样就没问题了。</p>
<p>Python:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findContinuousSequence</span><span class="params">(self, target: int)</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(n)</span>:</span></span><br><span class="line">            sum = (n * (n<span class="number">-1</span>)) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> (target - sum) % n == <span class="number">0</span>:</span><br><span class="line">                x = (target - sum) // n</span><br><span class="line">                tmp = [x + i <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">                <span class="keyword">return</span> tmp</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        ans = []</span><br><span class="line">        maxlength = int((<span class="number">2</span>*target)**<span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">2</span>, maxlength + <span class="number">1</span>):</span><br><span class="line">            tmp = helper(n)</span><br><span class="line">            <span class="keyword">if</span> tmp:</span><br><span class="line">                ans.append(tmp)</span><br><span class="line">        <span class="keyword">return</span> ans[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/02/90-subsets-ii/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/02/90-subsets-ii/" itemprop="url">Leetcode90-子集 II</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-02T22:22:52+08:00">
                2020-03-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>Given a collection of integers that might contain duplicates, <strong>nums</strong>, return all possible subsets (the power set).</p>
<p><strong>Note:</strong> The solution set must not contain duplicate subsets.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,2]</span><br><span class="line">Output:</span><br><span class="line">[</span><br><span class="line">  [2],</span><br><span class="line">  [1],</span><br><span class="line">  [1,2,2],</span><br><span class="line">  [2,2],</span><br><span class="line">  [1,2],</span><br><span class="line">  []</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>这道题有三种解法，第一种是每次从数组中选一个数，然后把这个结果加到答案中，如下图所示：</p>
<p><img src="https://i.loli.net/2020/03/04/QYaBMyg2rUwlmDF.png" alt="image.png"></p>
<p>要注意的就是如果一个数字和它前面的数字重复了那么就忽略它，因为如果不忽略它的话那么就会出现重复的结果，代码如下：</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subsetsWithDup</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        ans = []</span><br><span class="line">        nums.sort()</span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(start, cur)</span>:</span></span><br><span class="line">            ans.append(cur)</span><br><span class="line">            <span class="keyword">if</span> start == n:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(start, n):</span><br><span class="line">                <span class="keyword">if</span> (i &gt; start <span class="keyword">and</span> nums[i] == nums[i<span class="number">-1</span>]):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="comment"># cur.append(nums[i])</span></span><br><span class="line">                dfs(i+<span class="number">1</span>, cur + [nums[i]])</span><br><span class="line">                <span class="comment"># cur.pop()</span></span><br><span class="line">            </span><br><span class="line">        dfs(<span class="number">0</span>, [])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>第二种解法是对于每一个数字，都可以选它或者不选它，如下图所示：</p>
<p><img src="https://i.loli.net/2020/03/04/A56dxOFMGEH8v7j.png" alt="image.png"></p>
<p>从空数组开始，往下面的每一行是挑或者不挑待选数组中的一个数字，需要注意的也是重复的问题，如果当前结果中的最后一个数字和当前待挑选的数字相等，那么就只能挑选它而忽略不挑选它的结果，因为这一结果会出现重复，比如说上图中的左边第三行的<code>[]</code>和<code>[2]</code>，下一次迭代的时候待挑选的数字还是2，那么<code>[]</code>可以挑2，但是<code>[2]</code>就不能挑2了，挑的话就会出现重复（由于去重的原因这两种解法都要对<code>nums</code>数组排序，这样相等的元素才会在一起）。代码如下：</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subsetsWithDup</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">    	nums.sort()</span><br><span class="line">        ans = []</span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(i, cur)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> i == n:</span><br><span class="line">                ans.append(cur)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> cur <span class="keyword">or</span> nums[i] != cur[<span class="number">-1</span>]:</span><br><span class="line">                dfs(i + <span class="number">1</span>, cur)</span><br><span class="line">            dfs(i + <span class="number">1</span>, cur + [nums[i]])</span><br><span class="line">        dfs(<span class="number">0</span>, [])</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>还可以写成迭代的：</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subsetsWithDup</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">    	nums.sort()</span><br><span class="line">        ans = [[]]</span><br><span class="line">        n = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            tmp = []</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> ans:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">or</span> nums[i] != s[<span class="number">-1</span>]:</span><br><span class="line">                    tmp.append(s)</span><br><span class="line">                tmp.append(s + [nums[i]])</span><br><span class="line">            ans = tmp</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>第二种解法是先统计每一个数字出现了多少次，然后遍历这个数字所有可能出现的次数，如下图所示：</p>
<p><img src="https://i.loli.net/2020/03/04/YVJGpPWb9sZEiyn.png" alt="image.png"></p>
<p>因为有一个1和两个2，所以1可能出现零次或一次，2可能出现零次或一次或两次，这个想法和<a href="http://tiandiyijian.top/2019/08/09/78-subsets/" target="_blank" rel="noopener">第78题子集</a>有点像，只不过那道题里面所有的数字都只会出现零次或一次。代码如下：</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subsetsWithDup</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">    	num_count = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> num <span class="keyword">in</span> num_count:</span><br><span class="line">                num_count[num] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                num_count[num] = <span class="number">1</span></span><br><span class="line">        ans = [[]]</span><br><span class="line">        <span class="keyword">for</span> num, count <span class="keyword">in</span> num_count.items():</span><br><span class="line">            ans = [a + [num] * c <span class="keyword">for</span> c <span class="keyword">in</span> range(count + <span class="number">1</span>) <span class="keyword">for</span> a <span class="keyword">in</span> ans]</span><br><span class="line">            <span class="comment"># print(ans)</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>最近半年一直忙着保研的事，保过研后又在实验室里搞深度学习，但我总感觉那东西不适合我，又想找工作了，所以就又开始刷题了。上一次写题解还是去年十月，快半年没刷过题了，感觉水平下降了好多，虽说水平本来就不高哈哈。</p>
<p>图片出自<a href="https://www.youtube.com/watch?v=mJb7LESm3A8" target="_blank" rel="noopener">视频</a>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/07/89-gray-code/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/07/89-gray-code/" itemprop="url">Leetcode89-格雷码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-07T12:39:32+08:00">
                2019-10-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>The gray code is a binary numeral system where two successive values differ in only one bit.</p>
<p>Given a non-negative integer <em>n</em> representing the total number of bits in the code, print the sequence of gray code. A gray code sequence must begin with 0.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Input: 2</span><br><span class="line">Output: [0,1,3,2]</span><br><span class="line">Explanation:</span><br><span class="line">00 - 0</span><br><span class="line">01 - 1</span><br><span class="line">11 - 3</span><br><span class="line">10 - 2</span><br><span class="line"></span><br><span class="line">For a given n, a gray code sequence may not be uniquely defined.</span><br><span class="line">For example, [0,2,3,1] is also a valid gray code sequence.</span><br><span class="line"></span><br><span class="line">00 - 0</span><br><span class="line">10 - 2</span><br><span class="line">11 - 3</span><br><span class="line">01 - 1</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: 0</span><br><span class="line">Output: [0]</span><br><span class="line">Explanation: We define the gray code sequence to begin with 0.</span><br><span class="line">             A gray code sequence of n has size = 2n, which for n = 0 the size is 2^0 = 1.</span><br><span class="line">             Therefore, for n = 0 the gray code sequence is [0].</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>按照格雷码的规律就可以了。规律一：<code>n</code>的格雷码是由<code>n-1</code>的格雷码生成的，从后往前加上<code>2</code>的<code>n-1</code>次幂。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">grayCode</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span> n==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> [<span class="number">0</span>]</span><br><span class="line">        ans = [<span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            value = pow(<span class="number">2</span>, i)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(value - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">                ans.append(ans[j] + value)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>规律二：<code>G(i) = i ^ i&gt;&gt;1</code></p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">grayCode</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        ans = [<span class="number">0</span>] * <span class="number">2</span>**n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span> &lt;&lt; n):</span><br><span class="line">            ans[i] = i ^ i&gt;&gt;<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/46-permutations/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/46-permutations/" itemprop="url">Leetcode46-全排列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-06T17:49:41+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>Given a collection of <strong>distinct</strong> integers, return all possible permutations.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,3]</span><br><span class="line">Output:</span><br><span class="line">[</span><br><span class="line">  [1,2,3],</span><br><span class="line">  [1,3,2],</span><br><span class="line">  [2,1,3],</span><br><span class="line">  [2,3,1],</span><br><span class="line">  [3,1,2],</span><br><span class="line">  [3,2,1]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>递归处理，每次从数组中选出一个元素添加到一个排列中，然后递归处理剩下的元素，递归终止条件为排列的长度达到输入数组的长度。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums: <span class="keyword">return</span> nums</span><br><span class="line">        self.ans = []</span><br><span class="line">        self.nums = nums</span><br><span class="line">        self.tmp = []</span><br><span class="line">        self.length = len(nums)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">choose_num</span><span class="params">()</span>:</span></span><br><span class="line">            <span class="keyword">if</span> len(self.tmp) == self.length:</span><br><span class="line">                self.ans.append(self.tmp.copy())</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(len(self.nums)):</span><br><span class="line">                tmp_num = self.nums.pop(i)</span><br><span class="line">                self.tmp.append(tmp_num)</span><br><span class="line">                choose_num()</span><br><span class="line">                self.tmp.pop()</span><br><span class="line">                self.nums.insert(i, tmp_num)</span><br><span class="line">        choose_num()</span><br><span class="line">        <span class="keyword">return</span> self.ans</span><br></pre></td></tr></table></figure>
<p>这是最基础的版本，还有可以优化的地方。没有必要反复地删除和向数组中插入元素，一种方法是把要删除的那个元素换到前面去并记录前面的位置，递归之后再换回来，这种情况下根本不需要<code>tmp</code>这个变量，每一次递归结束的时候<code>nums</code>就是一个排列，因为每次选中一个元素就把它交换到了对应的位置；另一种方法是把删除这个元素后的数组和排列作为参数传递下去。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># version-1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums: <span class="keyword">return</span> nums</span><br><span class="line">        self.ans = []</span><br><span class="line">        self.nums = nums</span><br><span class="line">        <span class="comment"># self.tmp = []</span></span><br><span class="line">        self.length = len(nums)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">choose_num</span><span class="params">(pos)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> pos == self.length<span class="number">-1</span>:</span><br><span class="line">                self.ans.append(self.nums[:])</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(pos, len(self.nums)):</span><br><span class="line">                self.nums[pos], self.nums[i] = self.nums[i], self.nums[pos]</span><br><span class="line">                choose_num(pos + <span class="number">1</span>)</span><br><span class="line">                self.nums[pos], self.nums[i] = self.nums[i], self.nums[pos]</span><br><span class="line">        choose_num(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> self.ans</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># version-2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums: List[int])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums: <span class="keyword">return</span> nums</span><br><span class="line">        self.ans = []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">choose_num</span><span class="params">(nums, permutation)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">                self.ans.append(permutation)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">                choose_num(nums[:i] + nums[i + <span class="number">1</span>:], permutation + [nums[i]])</span><br><span class="line">        choose_num(nums, [])</span><br><span class="line">        <span class="keyword">return</span> self.ans</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/70-climbing-stairs/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/70-climbing-stairs/" itemprop="url">Leetcode70-爬楼梯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-06T15:56:17+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>You are climbing a stair case. It takes <em>n</em> steps to reach to the top.</p>
<p>Each time you can either climb 1 or 2 steps. In how many distinct ways can you climb to the top?</p>
<p><strong>Note:</strong> Given <em>n</em> will be a positive integer.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: 2</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: There are two ways to climb to the top.</span><br><span class="line">1. 1 step + 1 step</span><br><span class="line">2. 2 steps</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: 3</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: There are three ways to climb to the top.</span><br><span class="line">1. 1 step + 1 step + 1 step</span><br><span class="line">2. 1 step + 2 steps</span><br><span class="line">3. 2 steps + 1 step</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>爬到第<code>n</code>阶楼梯的方法数等于爬到第<code>n-1</code>阶楼梯的方法数（再爬一步到第<code>n</code>阶）加上爬到第<code>n-2</code>阶楼梯的方法数（再爬两步到第<code>n</code>阶）。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">climbStairs</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># res = [1, 2]</span></span><br><span class="line">        <span class="comment"># for i in range(2, n):</span></span><br><span class="line">        <span class="comment">#     res.append(res[i-2] + res[i-1])</span></span><br><span class="line">        <span class="comment"># return res[n-1]</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> n</span><br><span class="line">        a = <span class="number">1</span></span><br><span class="line">        b = <span class="number">2</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(n<span class="number">-2</span>):</span><br><span class="line">            ans = a + b</span><br><span class="line">            a, b = b, ans</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/151-reverse-words-in-a-string/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/151-reverse-words-in-a-string/" itemprop="url">Leetcode151-翻转字符串里的单词</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-06T15:22:43+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>Given an input string, reverse the string word by word.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;the sky is blue&quot;</span><br><span class="line">Output: &quot;blue is sky the&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;  hello world!  &quot;</span><br><span class="line">Output: &quot;world! hello&quot;</span><br><span class="line">Explanation: Your reversed string should not contain leading or trailing spaces.</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;a good   example&quot;</span><br><span class="line">Output: &quot;example good a&quot;</span><br><span class="line">Explanation: You need to reduce multiple spaces between two words to a single space in the reversed string.</span><br></pre></td></tr></table></figure>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>要去除的是字符串里的空白部分，利用Python自带的split()很方便。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverseWords</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="comment"># words = []</span></span><br><span class="line">        <span class="comment"># tmp = ""</span></span><br><span class="line">        <span class="comment"># for i in s:</span></span><br><span class="line">        <span class="comment">#     if i == " ":</span></span><br><span class="line">        <span class="comment">#         if tmp != "":</span></span><br><span class="line">        <span class="comment">#             words.append(tmp)</span></span><br><span class="line">        <span class="comment">#             tmp = ""</span></span><br><span class="line">        <span class="comment">#         else:</span></span><br><span class="line">        <span class="comment">#             continue</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         tmp += i</span></span><br><span class="line">        <span class="comment"># if tmp: words.append(tmp)</span></span><br><span class="line">        <span class="comment"># return " ".join(words[::-1])</span></span><br><span class="line">        words = s.split()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">" "</span>.join(words[::<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/14-longest-common-prefix/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="天地一键">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天地一键">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/14-longest-common-prefix/" itemprop="url">Leetcode14-最长公共前缀</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-06T11:13:21+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><p>Write a function to find the longest common prefix string amongst an array of strings.</p>
<p>If there is no common prefix, return an empty string <code>&quot;&quot;</code>.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]</span><br><span class="line">Output: &quot;fl&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]</span><br><span class="line">Output: &quot;&quot;</span><br><span class="line">Explanation: There is no common prefix among the input strings.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<p>All given inputs are in lowercase letters <code>a-z</code>.</p>
<h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>先找到最短的那个单词的长度，公共前缀最长也就这么长了，然后从0开始挨个比较。</p>
<p>Python：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> strs <span class="keyword">or</span> <span class="keyword">not</span> strs[<span class="number">0</span>]: <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">        max_pre_length = len(min(strs, key=len))</span><br><span class="line">        <span class="comment"># print(max_pre_length)</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(max_pre_length):</span><br><span class="line">            <span class="keyword">for</span> str <span class="keyword">in</span> strs[<span class="number">1</span>:]:</span><br><span class="line">                <span class="keyword">if</span> str[i] != strs[<span class="number">0</span>][i]:</span><br><span class="line">                    <span class="keyword">return</span> str[:i]</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>][:max_pre_length]</span><br></pre></td></tr></table></figure>
<p>利用Python的zip和*还有一种解法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonPrefix</span><span class="params">(self, strs: List[str])</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> strs: <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">        length = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> zip(*strs):</span><br><span class="line">            <span class="keyword">if</span> len(set(i)) == <span class="number">1</span>:</span><br><span class="line">                length += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> strs[<span class="number">0</span>][:length]</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="number">0</span>][:length]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">天地一键</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">82</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">天地一键</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
